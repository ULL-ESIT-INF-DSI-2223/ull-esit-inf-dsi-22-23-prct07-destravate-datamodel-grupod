<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-22-23-prct07-destravate-datamodel-grupod</title><meta name="description" content="Documentation for ull-esit-inf-dsi-22-23-prct07-destravate-datamodel-grupod"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-22-23-prct07-destravate-datamodel-grupod</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>ull-esit-inf-dsi-22-23-prct07-destravate-datamodel-grupod</h2></div>
<div class="tsd-panel tsd-typography"><p><a href="https://github.com/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct07-destravate-datamodel-grupod/actions/workflows/node.js.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct07-destravate-datamodel-grupod/actions/workflows/node.js.yml/badge.svg" alt="Node.js CI"></a>
<a href="https://github.com/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct07-destravate-datamodel-grupod/actions/workflows/test.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct07-destravate-datamodel-grupod/actions/workflows/test.yml/badge.svg" alt="Tests"></a></p>

<a href="#práctica-7---destravate" id="práctica-7---destravate" style="color: inherit; text-decoration: none;">
  <h1>Práctica 7 - DeStravaTe</h1>
</a>

<a href="#enunciado" id="enunciado" style="color: inherit; text-decoration: none;">
  <h2>Enunciado</h2>
</a>
<p>En esta práctica, tendremos que desarrollar un sistema de datos basado en una aplicación deportiva. Usaremos los módulos Inquirer.js para la interacción con el usuario y LowDB para la persistencia de datos. Se seguirá la metodología de desarrollo dirigido por pruebas (TDD), incluyendo los tests pertinentes con Mocha y Chai. Por otra parte, se usará la herramienta de integración continua Node.js CI, así como Coveralls para el análisis de cobertura de los tests y SonarCloud para el análisis estático del código.</p>

<a href="#descripción-de-requisitos-del-sistema" id="descripción-de-requisitos-del-sistema" style="color: inherit; text-decoration: none;">
  <h2>Descripción de requisitos del sistema</h2>
</a>

<a href="#interfaz-datatype" id="interfaz-datatype" style="color: inherit; text-decoration: none;">
  <h3>Interfaz Datatype</h3>
</a>
<p>Antes de implementar las clases definidas por los requisitos del sistema, definiremos la interfaz <code>Datatype</code>, la cual será implementada por todas las clases que sean instancias de datos.</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">interface</span><span class="hl-1"> </span><span class="hl-3">Datatype</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">nombre</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Estos atributos serán comunes a todas las clases que implementen la interfaz <code>Datatype</code>, y serán usados para identificar a cada objeto de datos.</p>

<a href="#rutas" id="rutas" style="color: inherit; text-decoration: none;">
  <h3>Rutas</h3>
</a>
<p>En primer lugar, se deberá implementar la clase Ruta, que contendrá la información de una ruta. Esta clase tendrá los siguientes atributos:</p>
<ul>
<li>ID de ruta</li>
<li>Nombre de ruta</li>
<li>Geolocalización de inicio</li>
<li>Geolocalización de fin</li>
<li>Distancia</li>
<li>Desnivel medio</li>
<li>Usuarios que han realizado la ruta</li>
<li>Tipo de actividad (correr o bicileta)</li>
<li>Calificación de la ruta</li>
</ul>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Ruta</span><span class="hl-1"> </span><span class="hl-2">implements</span><span class="hl-1"> </span><span class="hl-3">Datatype</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-4">rutacount</span><span class="hl-1"> = </span><span class="hl-5">0</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-4">ids_rutas</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">calificacion_media</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-4">nombre</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">cordenadas_incio</span><span class="hl-1">: </span><span class="hl-3">Coordenadas</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">cordenadas_fin</span><span class="hl-1">: </span><span class="hl-3">Coordenadas</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">distancia</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">desnivel</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">usuarios_ya_realizados</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[],</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">tipo_ruta</span><span class="hl-1">: </span><span class="hl-3">Actividad</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">calificacion</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[]</span><br/><span class="hl-1">  ) {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1"> = </span><span class="hl-4">Ruta</span><span class="hl-1">.</span><span class="hl-4">rutacount</span><span class="hl-1">++;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">cordenadas_incio</span><span class="hl-1"> = </span><span class="hl-4">cordenadas_incio</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">cordenadas_fin</span><span class="hl-1"> = </span><span class="hl-4">cordenadas_fin</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">distancia</span><span class="hl-1"> = </span><span class="hl-4">distancia</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">desnivel</span><span class="hl-1"> = </span><span class="hl-4">desnivel</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios_ya_realizados</span><span class="hl-1"> = </span><span class="hl-4">usuarios_ya_realizados</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">tipo_ruta</span><span class="hl-1"> = </span><span class="hl-4">tipo_ruta</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">calificacion</span><span class="hl-1"> = </span><span class="hl-4">calificacion</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">calificacion_media</span><span class="hl-1"> =</span><br/><span class="hl-1">      </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">calificacion</span><span class="hl-1">.</span><span class="hl-6">reduce</span><span class="hl-1">((</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">a</span><span class="hl-1"> + </span><span class="hl-4">b</span><span class="hl-1">, </span><span class="hl-5">0</span><span class="hl-1">) / </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">calificacion</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Para esta clase y las demás que implementen un identificador, se ha definido un atributo estático que servirá para contar el número de instancias de cada clase. De esta forma, se podrá asignar un identificador único a cada objeto de datos.</p>

<a href="#usuarios" id="usuarios" style="color: inherit; text-decoration: none;">
  <h3>Usuarios</h3>
</a>
<p>En segundo lugar, se deberá implementar la clase Usuario. Esta clase tendrá los siguientes atributos:</p>
<ul>
<li>ID de usuario</li>
<li>Nombre de usuario</li>
<li>Actividades que realiza (correr o bicicleta)</li>
<li>Amigos</li>
<li>Estadísticas de entrenamiento</li>
<li>Rutas favoritas</li>
<li>Retos activos</li>
<li>Rutas que ha realizado</li>
</ul>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Usuario</span><span class="hl-1"> </span><span class="hl-2">implements</span><span class="hl-1"> </span><span class="hl-3">Datatype</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-4">usercount</span><span class="hl-1"> = </span><span class="hl-5">0</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-4">nombre</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">actividad</span><span class="hl-1">: </span><span class="hl-3">Actividad</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">amigos</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[],</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">stats</span><span class="hl-1">: </span><span class="hl-3">Stats</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">rutas_favoritas</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[],</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">retos_activos</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[],</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">historico_rutas</span><span class="hl-1">: { </span><span class="hl-4">fecha</span><span class="hl-1">: </span><span class="hl-3">Date</span><span class="hl-1">; </span><span class="hl-4">rutaid</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1"> }[]</span><br/><span class="hl-1">  ) {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1"> = </span><span class="hl-4">Usuario</span><span class="hl-1">.</span><span class="hl-4">usercount</span><span class="hl-1">++;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#grupos" id="grupos" style="color: inherit; text-decoration: none;">
  <h3>Grupos</h3>
</a>
<p>Luego, se deberá implementar la clase Grupo. Esta clase tendrá los siguientes atributos:</p>
<ul>
<li>ID de grupo</li>
<li>Nombre de grupo</li>
<li>Usuarios que pertenecen al grupo</li>
<li>Estadísticas de entrenamiento del grupo</li>
<li>Clasificación de los usuarios</li>
<li>Rutas favoritas del grupo</li>
<li>Rutas realizadas por el grupo</li>
</ul>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Grupo</span><span class="hl-1"> </span><span class="hl-2">implements</span><span class="hl-1"> </span><span class="hl-3">Datatype</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-4">groupcount</span><span class="hl-1"> = </span><span class="hl-5">0</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-4">nombre</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">miembros</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[],</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">group_stats</span><span class="hl-1">: </span><span class="hl-3">Stats</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">clasificacion</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[],</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">rutas_favoritas</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[],</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">historico_rutas</span><span class="hl-1">: { </span><span class="hl-4">fecha</span><span class="hl-1">: </span><span class="hl-3">Date</span><span class="hl-1">; </span><span class="hl-4">rutaid</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1"> }[],</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">owner</span><span class="hl-1">: </span><span class="hl-3">number</span><br/><span class="hl-1">  ) {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1"> = </span><span class="hl-4">Grupo</span><span class="hl-1">.</span><span class="hl-4">groupcount</span><span class="hl-1">++;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#retos" id="retos" style="color: inherit; text-decoration: none;">
  <h3>Retos</h3>
</a>
<p>Por último, se deberá implementar la clase Reto. Esta clase tendrá los siguientes atributos:</p>
<ul>
<li>ID de reto</li>
<li>Nombre de reto</li>
<li>Rutas que componen el reto</li>
<li>Tipo de reto (correr o bicicleta)</li>
<li>Km totales</li>
<li>Usuarios que están participando en el reto</li>
</ul>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Reto</span><span class="hl-1"> </span><span class="hl-2">implements</span><span class="hl-1"> </span><span class="hl-3">Datatype</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-4">retoCount</span><span class="hl-1"> = </span><span class="hl-5">0</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-4">ids_retos</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[] = [];</span><br/><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-4">nombre</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">rutas</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[],</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">tipo_reto</span><span class="hl-1">: </span><span class="hl-3">Actividad</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">km_totales</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">usuarios_realizando_reto</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[]</span><br/><span class="hl-1">  ) {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1"> = </span><span class="hl-4">Reto</span><span class="hl-1">.</span><span class="hl-4">retoCount</span><span class="hl-1">++;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#colección-de-datos" id="colección-de-datos" style="color: inherit; text-decoration: none;">
  <h2>Colección de datos</h2>
</a>
<p>Definiremos para cada tipo de dato una clase que contendrá una colección de objetos de ese tipo. Estas clases se encargarán de gestionar la información de los objetos de datos, y de proporcionar métodos para añadir, borrar y modificar los datos. Para ello, crearemos una clase abstracta generica que contendrá los métodos comunes a todas las colecciones de datos.</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">abstract</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">BaseCollection</span><span class="hl-1">&lt;</span><span class="hl-3">T</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">Usuario</span><span class="hl-1"> | </span><span class="hl-3">Grupo</span><span class="hl-1"> | </span><span class="hl-3">Reto</span><span class="hl-1"> | </span><span class="hl-3">Ruta</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-2">protected</span><span class="hl-1"> </span><span class="hl-4">collection</span><span class="hl-1">: </span><span class="hl-3">Map</span><span class="hl-1">&lt;</span><span class="hl-3">number</span><span class="hl-1">, </span><span class="hl-3">T</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">collection</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Map</span><span class="hl-1">&lt;</span><span class="hl-3">number</span><span class="hl-1">, </span><span class="hl-3">T</span><span class="hl-1">&gt;();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Hemos elegido el tipo <code>Map</code> para almacenar los datos, ya que nos permite acceder a los datos de forma eficiente mediante su identificador.</p>
<pre><code class="language-typescript"><span class="hl-6">addElement</span><span class="hl-1">(</span><span class="hl-4">element</span><span class="hl-1">: </span><span class="hl-7">T</span><span class="hl-1">): </span><span class="hl-4">number</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">collection</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-4">element</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">, </span><span class="hl-4">element</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">element</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-6">removeElement</span><span class="hl-1">(</span><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">): </span><span class="hl-2">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">collection</span><span class="hl-1">.</span><span class="hl-6">delete</span><span class="hl-1">(</span><span class="hl-4">id</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-6">updateElement</span><span class="hl-1">(</span><span class="hl-4">element</span><span class="hl-1">: </span><span class="hl-7">T</span><span class="hl-1">): </span><span class="hl-2">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">collection</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-4">element</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">, </span><span class="hl-4">element</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>Con los métodos anteriores, podemos añadir, borrar y modificar elementos de la colección. Hay que tener en cuenta que estos datos se almacenan en memoria, por lo que si se cierra la aplicación, se perderán los datos.</p>

<a href="#colección-de-usuarios" id="colección-de-usuarios" style="color: inherit; text-decoration: none;">
  <h3>Colección de usuarios</h3>
</a>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">UsuarioCollection</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">BaseCollection</span><span class="hl-1">&lt;</span><span class="hl-3">Usuario</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">super</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#colección-de-grupos" id="colección-de-grupos" style="color: inherit; text-decoration: none;">
  <h3>Colección de grupos</h3>
</a>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">GrupoCollection</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">BaseCollection</span><span class="hl-1">&lt;</span><span class="hl-3">Grupo</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">super</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#colección-de-retos" id="colección-de-retos" style="color: inherit; text-decoration: none;">
  <h3>Colección de retos</h3>
</a>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">RetoCollection</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">BaseCollection</span><span class="hl-1">&lt;</span><span class="hl-3">Reto</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">super</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#colección-de-rutas" id="colección-de-rutas" style="color: inherit; text-decoration: none;">
  <h3>Colección de rutas</h3>
</a>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">RutaCollection</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">BaseCollection</span><span class="hl-1">&lt;</span><span class="hl-3">Ruta</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">super</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#adaptadores-json" id="adaptadores-json" style="color: inherit; text-decoration: none;">
  <h2>Adaptadores JSON</h2>
</a>
<p>Para poder almacenar los datos de forma persistente, se deberá implementar un adaptador que permita guardar y cargar los datos en formato JSON. Siguiendo el patrón de diseño <a href="https://en.wikipedia.org/wiki/Adapter_pattern">Adapter</a>, crearemos una clase por cada tipo de dato que sea hija de la clase colección correspondiente. Estas clases redefinen los métodos de la clase padre para que se adapten a la forma en la que se almacenan los datos en formato JSON.</p>

<a href="#adaptador-de-usuarios" id="adaptador-de-usuarios" style="color: inherit; text-decoration: none;">
  <h3>Adaptador de usuarios</h3>
</a>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">JsonUsuarios</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">UsuarioCollection</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">db</span><span class="hl-1">: </span><span class="hl-3">lowdb</span><span class="hl-1">.</span><span class="hl-3">LowdbSync</span><span class="hl-1">&lt;</span><span class="hl-3">schemaType</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">super</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1"> = </span><span class="hl-6">lowdb</span><span class="hl-1">(</span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">FileSync</span><span class="hl-1">(</span><span class="hl-8">&quot;./data/usuarios.json&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">defaults</span><span class="hl-1">({ </span><span class="hl-4">usuarios:</span><span class="hl-1"> [] }).</span><span class="hl-6">write</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">has</span><span class="hl-1">(</span><span class="hl-8">&quot;usuarios&quot;</span><span class="hl-1">).</span><span class="hl-6">value</span><span class="hl-1">()) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">usuarios</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-8">&quot;usuarios&quot;</span><span class="hl-1">).</span><span class="hl-6">value</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-4">item</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">usuario</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Usuario</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">actividad</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">amigos</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">rutas_favoritas</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">retos_activos</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">historico_rutas</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-2">super</span><span class="hl-1">.</span><span class="hl-6">addElement</span><span class="hl-1">(</span><span class="hl-4">usuario</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-8">&quot;usuarios&quot;</span><span class="hl-1">, []).</span><span class="hl-6">write</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>

<a href="#adaptador-de-grupos" id="adaptador-de-grupos" style="color: inherit; text-decoration: none;">
  <h3>Adaptador de grupos</h3>
</a>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">JsonGrupos</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">GrupoCollection</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">db</span><span class="hl-1">: </span><span class="hl-3">lowdb</span><span class="hl-1">.</span><span class="hl-3">LowdbSync</span><span class="hl-1">&lt;</span><span class="hl-3">schemaType</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">super</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1"> = </span><span class="hl-6">lowdb</span><span class="hl-1">(</span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">FileSync</span><span class="hl-1">(</span><span class="hl-8">&quot;./data/grupos.json&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">defaults</span><span class="hl-1">({ </span><span class="hl-4">grupos:</span><span class="hl-1"> [] }).</span><span class="hl-6">write</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">has</span><span class="hl-1">(</span><span class="hl-8">&quot;grupos&quot;</span><span class="hl-1">).</span><span class="hl-6">value</span><span class="hl-1">()) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">grupos</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-8">&quot;grupos&quot;</span><span class="hl-1">).</span><span class="hl-6">value</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-4">item</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">grupo</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Grupo</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">miembros</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">group_stats</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">clasificacion</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">rutas_favoritas</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">historico_rutas</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">owner</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-2">super</span><span class="hl-1">.</span><span class="hl-6">addElement</span><span class="hl-1">(</span><span class="hl-4">grupo</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-8">&quot;grupos&quot;</span><span class="hl-1">, []).</span><span class="hl-6">write</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#adaptador-de-retos" id="adaptador-de-retos" style="color: inherit; text-decoration: none;">
  <h3>Adaptador de retos</h3>
</a>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">JsonRetos</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">RetoCollection</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">db</span><span class="hl-1">: </span><span class="hl-3">lowdb</span><span class="hl-1">.</span><span class="hl-3">LowdbSync</span><span class="hl-1">&lt;</span><span class="hl-3">schemaType</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">super</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1"> = </span><span class="hl-6">lowdb</span><span class="hl-1">(</span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">FileSync</span><span class="hl-1">(</span><span class="hl-8">&quot;./data/retos.json&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">defaults</span><span class="hl-1">({ </span><span class="hl-4">retos:</span><span class="hl-1"> [] }).</span><span class="hl-6">write</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">has</span><span class="hl-1">(</span><span class="hl-8">&quot;retos&quot;</span><span class="hl-1">).</span><span class="hl-6">value</span><span class="hl-1">()) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">retos</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-8">&quot;retos&quot;</span><span class="hl-1">).</span><span class="hl-6">value</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-4">retos</span><span class="hl-1">.</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-4">item</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">reto</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Reto</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">ruta</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">tipo_reto</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">km_totales</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">usuarios_realizando_reto</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-2">super</span><span class="hl-1">.</span><span class="hl-6">addElement</span><span class="hl-1">(</span><span class="hl-4">reto</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-8">&quot;retos&quot;</span><span class="hl-1">, []).</span><span class="hl-6">write</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#adaptador-de-rutas" id="adaptador-de-rutas" style="color: inherit; text-decoration: none;">
  <h3>Adaptador de rutas</h3>
</a>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">JsonRutas</span><span class="hl-1"> </span><span class="hl-2">extends</span><span class="hl-1"> </span><span class="hl-3">RutaCollection</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">db</span><span class="hl-1">: </span><span class="hl-3">lowdb</span><span class="hl-1">.</span><span class="hl-3">LowdbSync</span><span class="hl-1">&lt;</span><span class="hl-3">schemaType</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">super</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1"> = </span><span class="hl-6">lowdb</span><span class="hl-1">(</span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">FileSync</span><span class="hl-1">(</span><span class="hl-8">&quot;./data/rutas.json&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">defaults</span><span class="hl-1">({ </span><span class="hl-4">rutas:</span><span class="hl-1"> [] }).</span><span class="hl-6">write</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">has</span><span class="hl-1">(</span><span class="hl-8">&quot;rutas&quot;</span><span class="hl-1">).</span><span class="hl-6">value</span><span class="hl-1">()) {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">rutas</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-8">&quot;rutas&quot;</span><span class="hl-1">).</span><span class="hl-6">value</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-4">rutas</span><span class="hl-1">.</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-4">item</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">ruta</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Ruta</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">coordenadas_inicio</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">coordenadas_fin</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">longitud</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">desnivel</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">usuarios_ya_realizados</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">tipo_ruta</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">item</span><span class="hl-1">.</span><span class="hl-4">calificacion</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-2">super</span><span class="hl-1">.</span><span class="hl-6">addElement</span><span class="hl-1">(</span><span class="hl-4">ruta</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-8">&quot;rutas&quot;</span><span class="hl-1">, []).</span><span class="hl-6">write</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#métodos-comunes-de-los-adaptadores" id="métodos-comunes-de-los-adaptadores" style="color: inherit; text-decoration: none;">
  <h3>Métodos comunes de los adaptadores</h3>
</a>
<p>Tomemos como ejemplo el adaptador de usuarios. Los métodos comunes de los adaptadores son los siguientes:</p>
<pre><code class="language-typescript"><span class="hl-1">  </span><span class="hl-6">addElement</span><span class="hl-1">(</span><span class="hl-4">element</span><span class="hl-1">: </span><span class="hl-4">Usuario</span><span class="hl-1">): </span><span class="hl-4">number</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">usuario</span><span class="hl-1"> = </span><span class="hl-2">super</span><span class="hl-1">.</span><span class="hl-6">addElement</span><span class="hl-1">(</span><span class="hl-4">element</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">storeUsuario</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">usuario</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-6">removeElement</span><span class="hl-1">(</span><span class="hl-4">id</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">): </span><span class="hl-2">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">super</span><span class="hl-1">.</span><span class="hl-6">removeElement</span><span class="hl-1">(</span><span class="hl-4">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">storeUsuario</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-6">storeUsuario</span><span class="hl-1">(): </span><span class="hl-2">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">db</span><span class="hl-1">.</span><span class="hl-6">set</span><span class="hl-1">(</span><span class="hl-8">&quot;usuarios&quot;</span><span class="hl-1">, [...</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">collection</span><span class="hl-1">.</span><span class="hl-6">values</span><span class="hl-1">()]).</span><span class="hl-6">write</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-6">updateElement</span><span class="hl-1">(</span><span class="hl-4">element</span><span class="hl-1">: </span><span class="hl-4">Usuario</span><span class="hl-1">): </span><span class="hl-2">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">super</span><span class="hl-1">.</span><span class="hl-6">updateElement</span><span class="hl-1">(</span><span class="hl-4">element</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">storeUsuario</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>Estos métodos se encargan de llamar a los métodos de la clase padre para realizar la operación correspondiente, y después llamar al método <code>storeUsuario</code> para guardar los datos en el fichero JSON.</p>

<a href="#funcionamiento" id="funcionamiento" style="color: inherit; text-decoration: none;">
  <h2>Funcionamiento</h2>
</a>
<p>La aplicación deberá permitir añadir, borrar y modificar rutas, usuarios, grupos y retos. Además, se deberá poder visualizar cada uno de los datos de la siguiente forma:</p>
<ol>
<li>Rutas:<ul>
<li>Alfabéticamente por nombre de la ruta, ascendente y descendente.</li>
<li>Cantidad de usuarios que realizan las rutas, ascendente y descendente.</li>
<li>Por longitud de la ruta, ascendente y descendente.</li>
<li>Por la calificación media de la ruta, ascendente y descendente.</li>
<li>Ordenar por actividad: correr o ciclismo.</li>
</ul>
</li>
<li>Usuarios:<ul>
<li>Alfabéticamente por nombre del usuario, ascendente y descendente.</li>
<li>Por cantidad de KM realizados (ascendente y descendentemente) en función de la semana actual, mes o año.</li>
</ul>
</li>
<li>Grupos:<ul>
<li>Alfabéticamente por nombre de la grupo, ascendente y descendente.</li>
<li>Por cantidad de KM realizados conjuntamente (ascendente y descendentemente) en función de la semana actual, mes o año.</li>
<li>Por la cantidad de miembros que lo componen, ascendente y descendente.</li>
</ul>
</li>
<li>Retos:<ul>
<li>Alfabéticamente por nombre del reto, ascendente y descendente.</li>
<li>Por cantidad de KM que se deben realizar, ascendente y descendente.</li>
<li>Por la cantidad de usuarios que lo están realizando, ascendente y descendente.</li>
</ul>
</li>
</ol>
<p>Todos estos métodos los almacenaremos en una clase <code>Admin</code>, que será la encargada de gestionar los datos de la aplicación.</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Admin</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">usuarios</span><span class="hl-1">: </span><span class="hl-3">UsuarioCollection</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">rutas</span><span class="hl-1">: </span><span class="hl-3">RutaCollection</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">retos</span><span class="hl-1">: </span><span class="hl-3">RetoCollection</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">grupos</span><span class="hl-1">: </span><span class="hl-3">GrupoCollection</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">current_user</span><span class="hl-1">: </span><span class="hl-3">Usuario</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-6">getInstance</span><span class="hl-1">(): </span><span class="hl-3">Admin</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">Admin</span><span class="hl-1">.</span><span class="hl-4">instance</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">Admin</span><span class="hl-1">.</span><span class="hl-4">instance</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Admin</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">Admin</span><span class="hl-1">.</span><span class="hl-4">instance</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-4">instance</span><span class="hl-1">: </span><span class="hl-3">Admin</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">JsonUsuarios</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">rutas</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">JsonRutas</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">retos</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">JsonRetos</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">JsonGrupos</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Usuario</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-8">&quot;none&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">undefined</span><span class="hl-1">,</span><br/><span class="hl-1">      [],</span><br/><span class="hl-1">      </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Stats</span><span class="hl-1">(),</span><br/><span class="hl-1">      [],</span><br/><span class="hl-1">      [],</span><br/><span class="hl-1">      []</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>Se hace uso del patrón Singleton para que solo exista una instancia de la clase <code>Admin</code> en la aplicación. La clase almacenará las colecciones de usuarios, rutas, retos y grupos.</p>

<a href="#añadir-datos" id="añadir-datos" style="color: inherit; text-decoration: none;">
  <h3>Añadir datos</h3>
</a>
<pre><code class="language-typescript"><span class="hl-6">crearUsuario</span><span class="hl-1">() {</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-4">inquirer</span><br/><span class="hl-1">.</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">{</span><br/><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;nombre&quot;</span><span class="hl-1">,</span><br/><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce el nombre del usuario&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">},</span><br/><span class="hl-1">{</span><br/><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;actividad&quot;</span><span class="hl-1">,</span><br/><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce la actividad que mas practica el usuario&quot;</span><span class="hl-1">,</span><br/><span class="hl-4">choices:</span><span class="hl-1"> [</span><span class="hl-8">&quot;correr&quot;</span><span class="hl-1">, </span><span class="hl-8">&quot;bicicleta&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">},</span><br/><span class="hl-1">])</span><br/><span class="hl-1">.</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1"> == </span><span class="hl-8">&quot;&quot;</span><span class="hl-1">) {</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Error al crear el usuario, nombre vacio&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">crearUsuario</span><span class="hl-1">();</span><br/><span class="hl-1">} </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">);</span><br/><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">user</span><span class="hl-1"> != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;El usuario ya existe&quot;</span><span class="hl-1">);</span><br/><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">crearUsuario</span><span class="hl-1">();</span><br/><span class="hl-1">} </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">addElement</span><span class="hl-1">(</span><br/><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Usuario</span><span class="hl-1">(</span><br/><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">,</span><br/><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">actividad</span><span class="hl-1">,</span><br/><span class="hl-1">[],</span><br/><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Stats</span><span class="hl-1">(),</span><br/><span class="hl-1">[],</span><br/><span class="hl-1">[],</span><br/><span class="hl-1">[]</span><br/><span class="hl-1">)</span><br/><span class="hl-1">);</span><br/><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">}</span><br/><span class="hl-1">}</span><br/><span class="hl-1">});</span>
</code></pre>
<pre><code class="language-typescript"><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-6">crearGrupo</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;nombre&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce el nombre del grupo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;miembros&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce los miembros del grupo separados por comas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1"> == </span><span class="hl-8">&quot;&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Error al crear el grupo, nombre vacio&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">crearGrupo</span><span class="hl-1">();</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">grupo</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">grupo</span><span class="hl-1"> != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;El grupo ya existe&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">crearGrupo</span><span class="hl-1">();</span><br/><span class="hl-1">          } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">miembros</span><span class="hl-1">: </span><span class="hl-3">number</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">            </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">miembrosString</span><span class="hl-1"> = </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">miembros</span><span class="hl-1">.</span><span class="hl-6">split</span><span class="hl-1">(</span><span class="hl-8">&quot;,&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-2">let</span><span class="hl-1"> </span><span class="hl-4">i</span><span class="hl-1"> = </span><span class="hl-5">0</span><span class="hl-1">; </span><span class="hl-4">i</span><span class="hl-1"> &lt; </span><span class="hl-4">miembrosString</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">; </span><span class="hl-4">i</span><span class="hl-1">++) {</span><br/><span class="hl-1">              </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">usuario</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">miembrosString</span><span class="hl-1">[</span><span class="hl-4">i</span><span class="hl-1">]);</span><br/><span class="hl-1">              </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">usuario</span><span class="hl-1"> != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-4">miembros</span><span class="hl-1">.</span><span class="hl-6">push</span><span class="hl-1">(</span><span class="hl-4">usuario</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">);</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">addElement</span><span class="hl-1">(</span><br/><span class="hl-1">              </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Grupo</span><span class="hl-1">(</span><br/><span class="hl-1">                </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">miembros</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Stats</span><span class="hl-1">(),</span><br/><span class="hl-1">                [],</span><br/><span class="hl-1">                [],</span><br/><span class="hl-1">                [],</span><br/><span class="hl-1">                </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-4">id</span><br/><span class="hl-1">              )</span><br/><span class="hl-1">            );</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<pre><code class="language-typescript"><span class="hl-1">  </span><span class="hl-6">crearRuta</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;nombre&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce el nombre de la ruta&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;longitud&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce la longitud de la ruta&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;desnivel&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce el desnivel de la ruta&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;coordenadas_inicio&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><br/><span class="hl-1">            </span><span class="hl-8">&quot;Introduce las coordenadas de inicio de la ruta separadas por comas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;coordenadas_fin&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><br/><span class="hl-1">            </span><span class="hl-8">&quot;Introduce las coordenadas de fin de la ruta separadas por comas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;tipo_ruta&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce el tipo de ruta&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">choices:</span><span class="hl-1"> [</span><span class="hl-8">&quot;correr&quot;</span><span class="hl-1">, </span><span class="hl-8">&quot;bicicleta&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><br/><span class="hl-1">          </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1"> == </span><span class="hl-8">&quot;&quot;</span><span class="hl-1"> ||</span><br/><span class="hl-1">          </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">longitud</span><span class="hl-1"> &lt; </span><span class="hl-5">0</span><span class="hl-1"> ||</span><br/><span class="hl-1">          </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">desnivel</span><span class="hl-1"> &lt; </span><span class="hl-5">0</span><span class="hl-1"> ||</span><br/><span class="hl-1">          </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">coordenadas_inicio</span><span class="hl-1">[</span><span class="hl-5">0</span><span class="hl-1">] == </span><span class="hl-8">&quot;&quot;</span><span class="hl-1"> ||</span><br/><span class="hl-1">          </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">coordenadas_inicio</span><span class="hl-1">[</span><span class="hl-5">1</span><span class="hl-1">] == </span><span class="hl-8">&quot;&quot;</span><span class="hl-1"> ||</span><br/><span class="hl-1">          </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">coordenadas_fin</span><span class="hl-1">[</span><span class="hl-5">0</span><span class="hl-1">] == </span><span class="hl-8">&quot;&quot;</span><span class="hl-1"> ||</span><br/><span class="hl-1">          </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">coordenadas_fin</span><span class="hl-1">[</span><span class="hl-5">1</span><span class="hl-1">] == </span><span class="hl-8">&quot;&quot;</span><span class="hl-1"> ||</span><br/><span class="hl-1">          </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">tipo_ruta</span><span class="hl-1"> == </span><span class="hl-8">&quot;&quot;</span><br/><span class="hl-1">        ) {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Error al crear la ruta, datos incorrectos&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">crearRuta</span><span class="hl-1">();</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">ruta</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">rutas</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">ruta</span><span class="hl-1"> != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;La ruta ya existe&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">crearRuta</span><span class="hl-1">();</span><br/><span class="hl-1">          } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">coordenadas_inicio</span><span class="hl-1"> = </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">coordenadas_inicio</span><span class="hl-1">.</span><span class="hl-6">split</span><span class="hl-1">(</span><span class="hl-8">&quot;,&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">coordenadas_fin</span><span class="hl-1"> = </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">coordenadas_fin</span><span class="hl-1">.</span><span class="hl-6">split</span><span class="hl-1">(</span><span class="hl-8">&quot;,&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">rutas</span><span class="hl-1">.</span><span class="hl-6">addElement</span><span class="hl-1">(</span><br/><span class="hl-1">              </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Ruta</span><span class="hl-1">(</span><br/><span class="hl-1">                </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">                [</span><span class="hl-4">coordenadas_inicio</span><span class="hl-1">[</span><span class="hl-5">0</span><span class="hl-1">], </span><span class="hl-4">coordenadas_inicio</span><span class="hl-1">[</span><span class="hl-5">1</span><span class="hl-1">]],</span><br/><span class="hl-1">                [</span><span class="hl-4">coordenadas_fin</span><span class="hl-1">[</span><span class="hl-5">0</span><span class="hl-1">], </span><span class="hl-4">coordenadas_fin</span><span class="hl-1">[</span><span class="hl-5">1</span><span class="hl-1">]],</span><br/><span class="hl-1">                </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">longitud</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">desnivel</span><span class="hl-1">,</span><br/><span class="hl-1">                [],</span><br/><span class="hl-1">                </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">tipo_ruta</span><span class="hl-1">,</span><br/><span class="hl-1">                []</span><br/><span class="hl-1">              )</span><br/><span class="hl-1">            );</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<pre><code class="language-typescript"><span class="hl-6">crearReto</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-4">inquirer</span><br/><span class="hl-1">    .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;nombre&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce el nombre del reto&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;tipo_reto&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce el tipo de reto&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">choices:</span><span class="hl-1"> [</span><span class="hl-8">&quot;correr&quot;</span><span class="hl-1">, </span><span class="hl-8">&quot;bicicleta&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;km_totales&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce los km totales del reto&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    ])</span><br/><span class="hl-1">    .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><br/><span class="hl-1">        </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1"> == </span><span class="hl-8">&quot;&quot;</span><span class="hl-1"> ||</span><br/><span class="hl-1">        </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">tipo_reto</span><span class="hl-1"> == </span><span class="hl-8">&quot;&quot;</span><span class="hl-1"> ||</span><br/><span class="hl-1">        </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">km_totales</span><span class="hl-1"> &lt; </span><span class="hl-5">0</span><br/><span class="hl-1">      ) {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Error al crear el reto, datos incorrectos&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">crearReto</span><span class="hl-1">();</span><br/><span class="hl-1">      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">reto</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">retos</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">reto</span><span class="hl-1"> != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;El reto ya existe&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">crearReto</span><span class="hl-1">();</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">retos</span><span class="hl-1">.</span><span class="hl-6">addElement</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Reto</span><span class="hl-1">(</span><br/><span class="hl-1">              </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">              [],</span><br/><span class="hl-1">              </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">tipo_reto</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">km_totales</span><span class="hl-1">,</span><br/><span class="hl-1">              []</span><br/><span class="hl-1">            )</span><br/><span class="hl-1">          );</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Los métodos anteriores son los que se encargan de crear los distintos elementos del programa, para ello se utiliza la librería inquirer para poder pedir los datos al usuario y crear los objetos con los datos introducidos. Si alguno de los datos introducidos no es correcto o ya está incluido en la base de datos, se volverá a pedir al usuario que introduzca los datos de nuevo.</p>

<a href="#eliminar-datos" id="eliminar-datos" style="color: inherit; text-decoration: none;">
  <h3>Eliminar datos</h3>
</a>
<pre><code class="language-typescript"><span class="hl-6">eliminarUsuario</span><span class="hl-1">(): </span><span class="hl-2">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;usuarios&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que usuario quieres eliminar?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">choices:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><br/><span class="hl-1">            .</span><span class="hl-6">getAllElements</span><span class="hl-1">()</span><br/><span class="hl-1">            .</span><span class="hl-6">map</span><span class="hl-1">((</span><span class="hl-4">usuario</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">usuario</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">removeElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Usuario eliminado correctamente&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<pre><code class="language-typescript"><span class="hl-1">  </span><span class="hl-6">eliminarReto</span><span class="hl-1">(): </span><span class="hl-2">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;retos&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que reto quieres eliminar?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">choices:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">retos</span><span class="hl-1">.</span><span class="hl-6">getAllElements</span><span class="hl-1">().</span><span class="hl-6">map</span><span class="hl-1">((</span><span class="hl-4">reto</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">reto</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">retos</span><span class="hl-1">.</span><span class="hl-6">removeElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">retos</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Reto eliminado correctamente&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<pre><code class="language-typescript"><span class="hl-1">  </span><span class="hl-6">eliminarRuta</span><span class="hl-1">(): </span><span class="hl-2">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;rutas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que ruta quieres eliminar?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">choices:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">rutas</span><span class="hl-1">.</span><span class="hl-6">getAllElements</span><span class="hl-1">().</span><span class="hl-6">map</span><span class="hl-1">((</span><span class="hl-4">ruta</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">ruta</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">rutas</span><span class="hl-1">.</span><span class="hl-6">removeElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">rutas</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Ruta eliminada correctamente&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<pre><code class="language-typescript"><span class="hl-1">  </span><span class="hl-6">eliminarGrupo</span><span class="hl-1">(): </span><span class="hl-2">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;grupos&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que grupo quieres eliminar?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">choices:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">getAllElements</span><span class="hl-1">().</span><span class="hl-6">map</span><span class="hl-1">((</span><span class="hl-4">grupo</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">grupo</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">grupo</span><span class="hl-1"> == </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;No existe el grupo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-6">getOwner</span><span class="hl-1">() !== </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;No eres el propietario del grupo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">removeElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Grupo eliminado correctamente&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>Estos métodos son los que se encargan de eliminar los distintos elementos del programa, para ello se utiliza la librería inquirer para poder pedir al usuario que seleccione el elemento que quiere eliminar. Si el usuario no es el propietario del grupo, no podrá eliminarlo.</p>

<a href="#modificar-datos" id="modificar-datos" style="color: inherit; text-decoration: none;">
  <h3>Modificar datos</h3>
</a>
<pre><code class="language-typescript"><span class="hl-6">modificarReto</span><span class="hl-1">(): </span><span class="hl-2">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;retos&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que reto quieres modificar?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">choices:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">retos</span><span class="hl-1">.</span><span class="hl-6">getAllElements</span><span class="hl-1">().</span><span class="hl-6">map</span><span class="hl-1">((</span><span class="hl-4">reto</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">reto</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">reto</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">retos</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">retos</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">reto</span><span class="hl-1"> != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">inquirer</span><br/><span class="hl-1">            .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">              {</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;modificar&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que quieres modificar?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">choices:</span><span class="hl-1"> [</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Nombre&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Tipo de reto&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Km totales&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Usuarios realizando el reto&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Rutas del reto&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                ],</span><br/><span class="hl-1">              },</span><br/><span class="hl-1">            ])</span><br/><span class="hl-1">            .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">modificar</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Nombre&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">modificarNombreReto</span><span class="hl-1">(</span><span class="hl-4">reto</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Tipo de reto&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">modificarTipoReto</span><span class="hl-1">(</span><span class="hl-4">reto</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Km totales&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">modificarKmTotalesReto</span><span class="hl-1">(</span><span class="hl-4">reto</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Usuarios realizando el reto&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">modificarUsuariosRealizandoReto</span><span class="hl-1">(</span><span class="hl-4">reto</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Rutas del reto&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">modificarRutasReto</span><span class="hl-1">(</span><span class="hl-4">reto</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;El reto no existe&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">modificarReto</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<pre><code class="language-typescript"><span class="hl-6">modificarGrupo</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;grupo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que grupo quieres modificar?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">choices:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">getAllElements</span><span class="hl-1">().</span><span class="hl-6">map</span><span class="hl-1">((</span><span class="hl-4">grupo</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">grupo</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">grupo</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">grupo</span><span class="hl-1"> != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-6">getOwner</span><span class="hl-1">() !== </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;No eres el propietario del grupo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">          } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">inquirer</span><br/><span class="hl-1">              .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                  </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;actividad&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que desea hacer?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-4">choices:</span><span class="hl-1"> [</span><br/><span class="hl-1">                    </span><span class="hl-8">&quot;Cambiar nombre&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-8">&quot;Añadir miembro&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-8">&quot;Añadir ruta favorita&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-8">&quot;Salir&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  ],</span><br/><span class="hl-1">                },</span><br/><span class="hl-1">              ])</span><br/><span class="hl-1">              .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">actividad</span><span class="hl-1">) {</span><br/><span class="hl-1">                  </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Cambiar nombre&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">cambiarNombreGrupo</span><span class="hl-1">(</span><span class="hl-4">grupo</span><span class="hl-1">);</span><br/><span class="hl-1">                    </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                  </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Añadir miembro&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">addMiembro</span><span class="hl-1">(</span><span class="hl-4">grupo</span><span class="hl-1">);</span><br/><span class="hl-1">                    </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                  </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Añadir ruta favorita&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">addRutaFavoritaGrupo</span><span class="hl-1">(</span><span class="hl-4">grupo</span><span class="hl-1">);</span><br/><span class="hl-1">                    </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                  </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Salir&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">                    </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">              });</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<pre><code class="language-typescript"><span class="hl-6">modificarRuta</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;ruta&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que ruta quieres modificar?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">choices:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">rutas</span><span class="hl-1">.</span><span class="hl-6">getAllElements</span><span class="hl-1">().</span><span class="hl-6">map</span><span class="hl-1">((</span><span class="hl-4">ruta</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">ruta</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">ruta</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">rutas</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">ruta</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">ruta</span><span class="hl-1"> != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">inquirer</span><br/><span class="hl-1">            .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">              {</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;actividad&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que desea hacer?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">choices:</span><span class="hl-1"> [</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Cambiar nombre&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Cambiar distancia&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Cambiar desnivel&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Cambiar tipo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Salir&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                ],</span><br/><span class="hl-1">              },</span><br/><span class="hl-1">            ])</span><br/><span class="hl-1">            .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">actividad</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Cambiar nombre&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">cambiarNombreRuta</span><span class="hl-1">(</span><span class="hl-4">ruta</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Cambiar distancia&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">cambiarDistanciaRuta</span><span class="hl-1">(</span><span class="hl-4">ruta</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Cambiar desnivel&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">cambiarDesnivelRuta</span><span class="hl-1">(</span><span class="hl-4">ruta</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Cambiar tipo&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">cambiarTipoRuta</span><span class="hl-1">(</span><span class="hl-4">ruta</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Salir&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<pre><code class="language-typescript"><span class="hl-6">modificarUsuario</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;usuario&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que usuario desea modificar?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">choices:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><br/><span class="hl-1">            .</span><span class="hl-6">getAllElements</span><span class="hl-1">()</span><br/><span class="hl-1">            .</span><span class="hl-6">map</span><span class="hl-1">((</span><span class="hl-4">usuario</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">usuario</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">usuario</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">usuario</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">usuario</span><span class="hl-1"> != </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">inquirer</span><br/><span class="hl-1">            .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">              {</span><br/><span class="hl-1">                </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;actividad&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que desea hacer?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">choices:</span><span class="hl-1"> [</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Cambiar nombre&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Cambiar actividad&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Añadir amigo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Añadir ruta favorita&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Añadir reto&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Añadir rutas&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-8">&quot;Salir&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                ],</span><br/><span class="hl-1">              },</span><br/><span class="hl-1">            ])</span><br/><span class="hl-1">            .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-0">switch</span><span class="hl-1"> (</span><span class="hl-4">answers</span><span class="hl-1">.</span><span class="hl-4">actividad</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Cambiar nombre&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">cambiarNombre</span><span class="hl-1">(</span><span class="hl-4">usuario</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Cambiar actividad&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">cambiarActividad</span><span class="hl-1">(</span><span class="hl-4">usuario</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Añadir amigo&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">anadirAmigo</span><span class="hl-1">(</span><span class="hl-4">usuario</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Añadir ruta favorita&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">anadirRutaFavorita</span><span class="hl-1">(</span><span class="hl-4">usuario</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Añadir reto&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">anadirReto</span><span class="hl-1">(</span><span class="hl-4">usuario</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Añadir rutas&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">anadirRutas</span><span class="hl-1">(</span><span class="hl-4">usuario</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-0">break</span><span class="hl-1">;</span><br/><span class="hl-1">                </span><span class="hl-0">case</span><span class="hl-1"> </span><span class="hl-8">&quot;Salir&quot;</span><span class="hl-1">:</span><br/><span class="hl-1">                  </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>Estos son los métodos que se encargan de modificar los distintos elementos de la aplicación. En todos ellos se utiliza la librería inquirer para pedir los datos al usuario y modificar el elemento en cuestión. En el caso de los grupos, se comprueba que el usuario que está modificando el grupo es el propietario del mismo. En cada opción, se llama a un método que se encarga de modificar el elemento en cuestión.</p>

<a href="#gestor" id="gestor" style="color: inherit; text-decoration: none;">
  <h2>Gestor</h2>
</a>
<p>Para gestionar el tratamiento del sistema, vamos a implementar una clase <code>Gestor</code>. La clase hara uso de inquirer para que un usuario pueda realizar las siguientes acciones:</p>
<ul>
<li>Registrarse en el sistema</li>
<li>Visualizar todas las rutas del sistema</li>
<li>Unirse a un grupo existente</li>
<li>Visualizar, crear y borrar grupos</li>
</ul>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-2">class</span><span class="hl-1"> </span><span class="hl-3">Gestor</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">usuarios</span><span class="hl-1">: </span><span class="hl-3">UsuarioCollection</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">rutas</span><span class="hl-1">: </span><span class="hl-3">RutaCollection</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">retos</span><span class="hl-1">: </span><span class="hl-3">RetoCollection</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">grupos</span><span class="hl-1">: </span><span class="hl-3">GrupoCollection</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-4">current_user</span><span class="hl-1">: </span><span class="hl-3">Usuario</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-4">instance</span><span class="hl-1">: </span><span class="hl-3">Gestor</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-2">public</span><span class="hl-1"> </span><span class="hl-2">static</span><span class="hl-1"> </span><span class="hl-6">getInstance</span><span class="hl-1">(): </span><span class="hl-3">Gestor</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-4">Gestor</span><span class="hl-1">.</span><span class="hl-4">instance</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">Gestor</span><span class="hl-1">.</span><span class="hl-4">instance</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Gestor</span><span class="hl-1">();</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">Gestor</span><span class="hl-1">.</span><span class="hl-4">instance</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">JsonUsuarios</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">rutas</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">JsonRutas</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">retos</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">JsonRetos</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">JsonGrupos</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Usuario</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-8">&quot;none&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">undefined</span><span class="hl-1">,</span><br/><span class="hl-1">      [],</span><br/><span class="hl-1">      </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Stats</span><span class="hl-1">(),</span><br/><span class="hl-1">      [],</span><br/><span class="hl-1">      [],</span><br/><span class="hl-1">      []</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Al igual que la clase admin, la clase gestor es un singleton. En el constructor se inicializan las colecciones de usuarios, rutas, retos y grupos. Además, se crea un usuario vacío que se utilizará para almacenar el usuario que se ha logueado en el sistema.</p>

<a href="#inicio-de-sesión" id="inicio-de-sesión" style="color: inherit; text-decoration: none;">
  <h3>Inicio de sesión</h3>
</a>
<pre><code class="language-typescript"><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">login</span><span class="hl-1">(): </span><span class="hl-2">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;username&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce tu nombre de usuario&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">username</span><span class="hl-1"> = </span><span class="hl-4">answers</span><span class="hl-1">[</span><span class="hl-8">&quot;username&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">username</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">user</span><span class="hl-1"> !== </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1"> = </span><span class="hl-4">user</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">          </span><span class="hl-0">return</span><span class="hl-1">;</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">errorLogin</span><span class="hl-1">();</span><br/><span class="hl-1">          </span><span class="hl-0">return</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>El método <code>login()</code> se encarga de pedir el nombre de usuario al usuario y comprobar si existe en la colección de usuarios. Si existe, se guarda el usuario en la variable <code>current_user</code> y se llama al método <code>mainMenu()</code>. Si no existe, se llama al método <code>errorLogin()</code>, el cual se encargará de preguntar si el usuario quiere intentarlo de nuevo o registrarse.</p>

<a href="#registro" id="registro" style="color: inherit; text-decoration: none;">
  <h3>Registro</h3>
</a>
<pre><code class="language-typescript"><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">register</span><span class="hl-1">(): </span><span class="hl-2">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;username&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce tu nombre de usuario&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">username</span><span class="hl-1"> = </span><span class="hl-4">answers</span><span class="hl-1">[</span><span class="hl-8">&quot;username&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">username</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">user</span><span class="hl-1"> !== </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">errorRegistrarse</span><span class="hl-1">();</span><br/><span class="hl-1">          </span><span class="hl-0">return</span><span class="hl-1">;</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Usuario</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-4">username</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">undefined</span><span class="hl-1">,</span><br/><span class="hl-1">            [],</span><br/><span class="hl-1">            </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Stats</span><span class="hl-1">(),</span><br/><span class="hl-1">            [],</span><br/><span class="hl-1">            [],</span><br/><span class="hl-1">            []</span><br/><span class="hl-1">          );</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">addElement</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1"> = </span><span class="hl-4">user</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">          </span><span class="hl-0">return</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>El método <code>register()</code> se encarga de pedir el nombre de usuario al usuario y comprobar si existe en la colección de usuarios. Si existe, se llama al método <code>errorRegistrarse()</code>, el cual se encargará de preguntar si el usuario quiere intentarlo de nuevo o iniciar sesión con esa cuenta. Si no existe, se crea un nuevo usuario con el nombre de usuario introducido y se añade a la colección de usuarios. Después, se guarda el usuario en la variable <code>current_user</code> y se llama al método <code>mainMenu()</code>.</p>

<a href="#añadir-amigos" id="añadir-amigos" style="color: inherit; text-decoration: none;">
  <h3>Añadir amigos</h3>
</a>
<pre><code class="language-typescript"><span class="hl-1"> </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">addFriend</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Añadir amigo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-4">inquirer</span><br/><span class="hl-1">    .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;username&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce el nombre de usuario del amigo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    ])</span><br/><span class="hl-1">    .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">username</span><span class="hl-1"> = </span><span class="hl-4">answers</span><span class="hl-1">[</span><span class="hl-8">&quot;username&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">username</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">user</span><span class="hl-1"> !== </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-6">getAmigos</span><span class="hl-1">().</span><span class="hl-6">includes</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">)) {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Ya es tu amigo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">gestionarAmigos</span><span class="hl-1">();</span><br/><span class="hl-1">          </span><span class="hl-0">return</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1"> === </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;No puedes añadirte a ti mismo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">gestionarAmigos</span><span class="hl-1">();</span><br/><span class="hl-1">          </span><span class="hl-0">return</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-6">addAmigo</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Amigo añadido&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">updateElement</span><span class="hl-1">(</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">gestionarAmigos</span><span class="hl-1">();</span><br/><span class="hl-1">      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Usuario no encontrado&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">addFriend</span><span class="hl-1">();</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">}</span>
</code></pre>
<p>El método <code>addFriend()</code> se encarga de pedir el nombre de usuario y comprobar si existe en la colección. Si existe, se comprueba si ya es amigo del usuario actual. Si no es amigo, se añade el usuario a la lista de amigos del usuario actual y se actualiza en la colección. Si no existe, se muestra un mensaje de error y se vuelve a llamar al método.</p>

<a href="#eliminar-amigos" id="eliminar-amigos" style="color: inherit; text-decoration: none;">
  <h3>Eliminar amigos</h3>
</a>
<pre><code class="language-typescript"><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">removeFriend</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Eliminar amigo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;username&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce el nombre de usuario del amigo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">username</span><span class="hl-1"> = </span><span class="hl-4">answers</span><span class="hl-1">[</span><span class="hl-8">&quot;username&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">username</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">user</span><span class="hl-1"> !== </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-6">removeAmigo</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Amigo eliminado&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">updateElement</span><span class="hl-1">(</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">gestionarAmigos</span><span class="hl-1">();</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Usuario no encontrado&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">removeFriend</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>El método <code>removeFriend()</code> se encarga de pedir el nombre de usuario y comprobar si existe en la colección. Si existe, se elimina el usuario de la lista de amigos del usuario actual y se actualiza en la colección. Si no existe, se muestra un mensaje de error y se vuelve a llamar al método.</p>

<a href="#visualizar-rutas" id="visualizar-rutas" style="color: inherit; text-decoration: none;">
  <h3>Visualizar rutas</h3>
</a>
<pre><code class="language-typescript"><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">verRutas</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Rutas&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">options</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">rutas</span><span class="hl-1">.</span><span class="hl-6">getAllElements</span><span class="hl-1">().</span><span class="hl-6">map</span><span class="hl-1">((</span><span class="hl-4">ruta</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">ruta</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">options</span><span class="hl-1">.</span><span class="hl-6">push</span><span class="hl-1">(</span><span class="hl-8">&quot;Volver al menú principal&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;command&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Elija una ruta para ver sus detalles&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">choices:</span><span class="hl-1"> </span><span class="hl-4">options</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">answers</span><span class="hl-1">[</span><span class="hl-8">&quot;command&quot;</span><span class="hl-1">] === </span><span class="hl-8">&quot;Volver al menú principal&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">verRuta</span><span class="hl-1">(</span><span class="hl-4">answers</span><span class="hl-1">[</span><span class="hl-8">&quot;command&quot;</span><span class="hl-1">]);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>En este menú, se muestran todas las rutas del sistema. El usuario puede seleccionar una ruta para ver sus detalle</p>
<pre><code class="language-typescript"><span class="hl-1"> </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">verRuta</span><span class="hl-1">(</span><span class="hl-4">nombre</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Ruta&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">ruta</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">rutas</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">nombre</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">ruta</span><span class="hl-1"> !== </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Nombre: &quot;</span><span class="hl-1"> + </span><span class="hl-4">ruta</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Geolocalización de inicio: &quot;</span><span class="hl-1"> + </span><span class="hl-4">ruta</span><span class="hl-1">.</span><span class="hl-6">getCoordenadasInicio</span><span class="hl-1">());</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Geolocalización de fin: &quot;</span><span class="hl-1"> + </span><span class="hl-4">ruta</span><span class="hl-1">.</span><span class="hl-6">getCoordenadasFin</span><span class="hl-1">());</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Longitud de la ruta: &quot;</span><span class="hl-1"> + </span><span class="hl-4">ruta</span><span class="hl-1">.</span><span class="hl-6">getDistancia</span><span class="hl-1">() + </span><span class="hl-8">&quot; km&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Desnivel medio de la ruta: &quot;</span><span class="hl-1"> + </span><span class="hl-4">ruta</span><span class="hl-1">.</span><span class="hl-6">getDesnivel</span><span class="hl-1">() + </span><span class="hl-8">&quot; m&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Usuarios que han realizado la ruta: &quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">ruta</span><span class="hl-1">.</span><span class="hl-6">getUsuarios</span><span class="hl-1">().</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-4">id</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">usuarios</span><span class="hl-1">.</span><span class="hl-6">getElement</span><span class="hl-1">(</span><span class="hl-4">id</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">user</span><span class="hl-1"> !== </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Tipo de actividad: &quot;</span><span class="hl-1"> + </span><span class="hl-4">ruta</span><span class="hl-1">.</span><span class="hl-6">getTipoRuta</span><span class="hl-1">());</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Calificación media: &quot;</span><span class="hl-1"> + </span><span class="hl-4">ruta</span><span class="hl-1">.</span><span class="hl-6">getCalificacionMedia</span><span class="hl-1">());</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-4">inquirer</span><br/><span class="hl-1">        .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">          {</span><br/><span class="hl-1">            </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;command&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que quieres hacer?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">choices:</span><span class="hl-1"> [</span><span class="hl-8">&quot;Volver a ver rutas&quot;</span><span class="hl-1">, </span><span class="hl-8">&quot;Volver al menú principal&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">        ])</span><br/><span class="hl-1">        .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">answers</span><span class="hl-1">[</span><span class="hl-8">&quot;command&quot;</span><span class="hl-1">] === </span><span class="hl-8">&quot;Volver a ver rutas&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">verRutas</span><span class="hl-1">();</span><br/><span class="hl-1">          } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>El método <code>verRuta()</code> se encarga de mostrar los detalles de una ruta. Estos detalles incluyen el nombre, las coordenadas de inicio y fin, la longitud, el desnivel medio, los usuarios que han realizado la ruta, el tipo de actividad y la calificación media.</p>

<a href="#unirse-a-un-grupo" id="unirse-a-un-grupo" style="color: inherit; text-decoration: none;">
  <h3>Unirse a un grupo</h3>
</a>
<pre><code class="language-typescript"><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">unirseGrupo</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Unirse a grupo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">toString</span><span class="hl-1">());</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;nombre&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Elija un grupo para unirse&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">choices:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">getAllElements</span><span class="hl-1">().</span><span class="hl-6">map</span><span class="hl-1">((</span><span class="hl-4">grupo</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">),</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">nombre</span><span class="hl-1"> = </span><span class="hl-4">answers</span><span class="hl-1">[</span><span class="hl-8">&quot;nombre&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">grupo</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">nombre</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">grupo</span><span class="hl-1"> !== </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-6">getMiembros</span><span class="hl-1">().</span><span class="hl-6">includes</span><span class="hl-1">(</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">)) {</span><br/><span class="hl-1">            </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Ya eres miembro de este grupo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">            </span><span class="hl-0">return</span><span class="hl-1">;</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">          </span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-6">addMiembro</span><span class="hl-1">(</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">updateElement</span><span class="hl-1">(</span><span class="hl-4">grupo</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Te has unido al grupo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Grupo no encontrado&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">unirseGrupo</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>El método <code>unirseGrupo()</code> se encarga de mostrar todos los grupos del sistema y permitir al usuario unirse a uno de ellos. Si el usuario ya es miembro del grupo, se le notifica y se le devuelve al menú principal. Si el usuario no es miembro del grupo, se le añade a la lista de miembros del grupo y se le notifica.</p>

<a href="#visualizar-grupos" id="visualizar-grupos" style="color: inherit; text-decoration: none;">
  <h3>Visualizar grupos</h3>
</a>
<pre><code class="language-typescript"><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">verGrupos</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Grupos&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">forEach</span><span class="hl-1">((</span><span class="hl-4">grupo</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;command&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;¿Que quieres hacer?&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">choices:</span><span class="hl-1"> [</span><span class="hl-8">&quot;Volver al menú principal&quot;</span><span class="hl-1">, </span><span class="hl-8">&quot;Gestionar grupos&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">answers</span><span class="hl-1">[</span><span class="hl-8">&quot;command&quot;</span><span class="hl-1">] === </span><span class="hl-8">&quot;Volver al menú principal&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">gestionarGrupos</span><span class="hl-1">();</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>El método <code>verGrupos()</code> se encarga de mostrar todos los grupos del sistema. El usuario puede elegir entre volver al menú principal o gestionar los grupos.</p>

<a href="#crear-grupo" id="crear-grupo" style="color: inherit; text-decoration: none;">
  <h3>Crear grupo</h3>
</a>
<pre><code class="language-typescript"><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">crearGrupo</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Crear grupo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-4">inquirer</span><br/><span class="hl-1">      .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">        {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;input&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;nombre&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Introduce el nombre del grupo&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      ])</span><br/><span class="hl-1">      .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">nombre</span><span class="hl-1"> = </span><span class="hl-4">answers</span><span class="hl-1">[</span><span class="hl-8">&quot;nombre&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">        </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">grupo</span><span class="hl-1"> = </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-6">Grupo</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-4">nombre</span><span class="hl-1">,</span><br/><span class="hl-1">          [</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">],</span><br/><span class="hl-1">          {</span><br/><span class="hl-1">            </span><span class="hl-4">km_anio:</span><span class="hl-1"> </span><span class="hl-5">0</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">km_mes:</span><span class="hl-1"> </span><span class="hl-5">0</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">km_semana:</span><span class="hl-1"> </span><span class="hl-5">0</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">desnivel_anio:</span><span class="hl-1"> </span><span class="hl-5">0</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">desnivel_mes:</span><span class="hl-1"> </span><span class="hl-5">0</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">desnivel_semana:</span><span class="hl-1"> </span><span class="hl-5">0</span><span class="hl-1">,</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          [</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">],</span><br/><span class="hl-1">          [],</span><br/><span class="hl-1">          [],</span><br/><span class="hl-1">          </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-4">id</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-6">addMiembro</span><span class="hl-1">(</span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">addElement</span><span class="hl-1">(</span><span class="hl-4">grupo</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Grupo creado&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">mainMenu</span><span class="hl-1">();</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>El método <code>crearGrupo()</code> se encarga de crear un grupo. El usuario introduce el nombre del grupo y se crea un grupo con ese nombre. El usuario que crea el grupo se añade a la lista de miembros del grupo.</p>

<a href="#eliminar-grupo" id="eliminar-grupo" style="color: inherit; text-decoration: none;">
  <h3>Eliminar grupo</h3>
</a>
<pre><code class="language-typescript"><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-6">eliminarGrupo</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">clear</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Eliminar grupo&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">options</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">getAllElements</span><span class="hl-1">().</span><span class="hl-6">map</span><span class="hl-1">((</span><span class="hl-4">grupo</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">options</span><span class="hl-1">.</span><span class="hl-6">push</span><span class="hl-1">(</span><span class="hl-8">&quot;Volver al menú principal&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">inquirer</span><br/><span class="hl-1">    .</span><span class="hl-6">prompt</span><span class="hl-1">([</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-8">&quot;list&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;nombre&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">message:</span><span class="hl-1"> </span><span class="hl-8">&quot;Elija un grupo para eliminar&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">choices:</span><span class="hl-1"> </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">getAllElements</span><span class="hl-1">().</span><span class="hl-6">map</span><span class="hl-1">((</span><span class="hl-4">grupo</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-4">nombre</span><span class="hl-1">),</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    ])</span><br/><span class="hl-1">    .</span><span class="hl-6">then</span><span class="hl-1">((</span><span class="hl-4">answers</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">answers</span><span class="hl-1">[</span><span class="hl-8">&quot;nombre&quot;</span><span class="hl-1">] === </span><span class="hl-8">&quot;Volver al menú principal&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">gestionarGrupos</span><span class="hl-1">();</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">nombre</span><span class="hl-1"> = </span><span class="hl-4">answers</span><span class="hl-1">[</span><span class="hl-8">&quot;nombre&quot;</span><span class="hl-1">];</span><br/><span class="hl-1">      </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">grupo</span><span class="hl-1"> = </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">findElement</span><span class="hl-1">(</span><span class="hl-4">nombre</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">grupo</span><span class="hl-1"> === </span><span class="hl-2">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Grupo no encontrado&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">eliminarGrupo</span><span class="hl-1">();</span><br/><span class="hl-1">      } </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-6">getOwner</span><span class="hl-1">() !== </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">current_user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-4">grupos</span><span class="hl-1">.</span><span class="hl-6">removeElement</span><span class="hl-1">(</span><span class="hl-4">grupo</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;Grupo eliminado&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">gestionarGrupos</span><span class="hl-1">();</span><br/><span class="hl-1">      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-6">log</span><span class="hl-1">(</span><span class="hl-8">&quot;No puedes eliminar un grupo que no te pertenece&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">this</span><span class="hl-1">.</span><span class="hl-6">gestionarGrupos</span><span class="hl-1">();</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">}</span>
</code></pre>
<p>El método <code>eliminarGrupo()</code> se encarga de eliminar un grupo. El usuario elige el grupo y se elimina. Si el usuario que intenta eliminar el grupo no es el propietario del grupo, se le notifica y se le devuelve al menú de gestión de grupos.</p>

<a href="#conclusiones" id="conclusiones" style="color: inherit; text-decoration: none;">
  <h2>Conclusiones</h2>
</a>
<p>Hemos conseguido implementar de forma simplificada el funcionamiento de una aplicación deportiva. Los módulos inquirer.js y lowdb han resultado útiles para la implementación de la interfaz de usuario y la persistencia de datos. Por otra parte, la implementación de los patrones de diseño Singleton y Adapter han resultado útiles para la implementación de la aplicación. De la misma forma, las herramientas de integración continua, el cubrimiento de código y verificación de la calidad del código han resultado útiles para la implementación de la aplicación. En general, el proyecto ha resultado satisfactorio y ha cumplido con los objetivos propuestos.</p>

<a href="#bibliografía" id="bibliografía" style="color: inherit; text-decoration: none;">
  <h2>Bibliografía</h2>
</a>
<p>[1] <a href="https://www.npmjs.com/package/inquirer">Página de npm de Inquirer</a></p>
<p>[2] <a href="https://www.npmjs.com/package/lowdb">Página de npm de LowDB</a></p>
<p>[3] <a href="https://ull-esit-inf-dsi-2223.github.io/typescript-theory/">Apuntes de la asignatura</a></p>
<p>[4] <a href="https://www.oreilly.com/library/view/essential-typescript-4/9781484270110/html/Part_1.xhtml">Adam Freeman - Essential Typescript 4: From Beginner to Pro</a></p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">ull-<wbr/>esit-<wbr/>inf-<wbr/>dsi-<wbr/>22-<wbr/>23-<wbr/>prct07-<wbr/>destravate-<wbr/>datamodel-<wbr/>grupod</a>
<ul>
<li class="tsd-kind-module"><a href="modules/app_Admin.html">app/<wbr/>Admin</a></li>
<li class="tsd-kind-module"><a href="modules/app_Gestor.html">app/<wbr/>Gestor</a></li>
<li class="tsd-kind-module"><a href="modules/collections_base_collection.html">collections/base_<wbr/>collection</a></li>
<li class="tsd-kind-module"><a href="modules/collections_grupos_collection.html">collections/grupos_<wbr/>collection</a></li>
<li class="tsd-kind-module"><a href="modules/collections_retos_collection.html">collections/retos_<wbr/>collection</a></li>
<li class="tsd-kind-module"><a href="modules/collections_rutas_collection.html">collections/rutas_<wbr/>collection</a></li>
<li class="tsd-kind-module"><a href="modules/collections_usuario_collection.html">collections/usuario_<wbr/>collection</a></li>
<li class="tsd-kind-module"><a href="modules/datatypes_datatype.html">datatypes/datatype</a></li>
<li class="tsd-kind-module"><a href="modules/datatypes_grupos.html">datatypes/grupos</a></li>
<li class="tsd-kind-module"><a href="modules/datatypes_retos.html">datatypes/retos</a></li>
<li class="tsd-kind-module"><a href="modules/datatypes_rutas.html">datatypes/rutas</a></li>
<li class="tsd-kind-module"><a href="modules/datatypes_stats.html">datatypes/stats</a></li>
<li class="tsd-kind-module"><a href="modules/datatypes_usuarios.html">datatypes/usuarios</a></li>
<li class="tsd-kind-module"><a href="modules/index.html">index</a></li>
<li class="tsd-kind-module"><a href="modules/index-1.html">index</a></li>
<li class="tsd-kind-module"><a href="modules/jsonadapters_jsongrupos.html">jsonadapters/jsongrupos</a></li>
<li class="tsd-kind-module"><a href="modules/jsonadapters_jsonretos.html">jsonadapters/jsonretos</a></li>
<li class="tsd-kind-module"><a href="modules/jsonadapters_jsonrutas.html">jsonadapters/jsonrutas</a></li>
<li class="tsd-kind-module"><a href="modules/jsonadapters_jsonusuarios.html">jsonadapters/jsonusuarios</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>